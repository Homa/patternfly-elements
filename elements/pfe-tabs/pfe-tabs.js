import e from"../pfelement/pfelement.js";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],a=0;a<r;){var s=t[a];if(e.call(n,s,a,t))return s;a++}},configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],a=0;a<r;){var s=t[a];if(e.call(n,s,a,t))return a;a++}return-1},configurable:!0,writable:!0});const t={DOWN:40,LEFT:37,RIGHT:39,UP:38,HOME:36,END:35};function r(){return Math.random().toString(36).substr(2,9)}class n extends e{get html(){return'\n<style>\n:host {\n  display: block; }\n\n.tabs {\n  --pfe-tabs--border-color:          var(--pfe-theme--color--surface--border, #dfdfdf);\n  display: flex;\n  border: 0;\n  border-bottom: var(--pfe-theme--ui--border-width, 1px) var(--pfe-theme--ui--border-style, solid) var(--pfe-tabs--border-color); }\n\n.panels {\n  padding: 0;\n  padding-top: var(--pfe-theme--container-padding, 1rem); }\n\n:host([vertical]) {\n  display: flex; }\n\n:host([vertical]) .tabs {\n  flex-direction: column;\n  width: 25%;\n  border: 0;\n  border-right: var(--pfe-theme--ui--border-width, 1px) var(--pfe-theme--ui--border-style, solid) var(--pfe-tabs--border-color); }\n\n:host([vertical]) .tabs ::slotted(pfe-tab) {\n  margin: 0 -1px 0 0;\n  border: var(--pfe-theme--ui--border-width, 1px) var(--pfe-theme--ui--border-style, solid) transparent;\n  border-right: 0; }\n\n:host([vertical]) .tabs ::slotted(pfe-tab[aria-selected="true"]) {\n  border-color: var(--pfe-tabs--border-color);\n  border-right: 0; }\n\n:host([vertical]) .panels {\n  padding: 0;\n  padding-right: var(--pfe-theme--container-padding, 1rem);\n  padding-left: calc(var(--pfe-theme--container-padding, 1rem) * 2); }\n</style>\n<div class="tabs">\n  <slot name="tab"></slot>\n</div>\n<div class="panels">\n  <slot name="panel"></slot>\n</div>'}static get tag(){return"pfe-tabs"}get styleUrl(){return"pfe-tabs.scss"}get templateUrl(){return"pfe-tabs.html"}static get observedAttributes(){return["vertical","selected-index"]}get selectedIndex(){return this.getAttribute("selected-index")}set selectedIndex(e){this.setAttribute("selected-index",e)}constructor(){super(n),this._linked=!1,this._onSlotChange=this._onSlotChange.bind(this),this._tabSlot=this.shadowRoot.querySelector('slot[name="tab"]'),this._panelSlot=this.shadowRoot.querySelector('slot[name="panel"]'),this._tabSlot.addEventListener("slotchange",this._onSlotChange),this._panelSlot.addEventListener("slotchange",this._onSlotChange)}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",this._onKeyDown),this.addEventListener("click",this._onClick),this.hasAttribute("role")||this.setAttribute("role","tablist"),this.hasAttribute("selected-index")||(this.selectedIndex=0),Promise.all([customElements.whenDefined(a.tag),customElements.whenDefined(s.tag)]).then(()=>this._linkPanels())}disconnectedCallback(){this.removeEventListener("keydown",this._onKeyDown),this.removeEventListener("click",this._onClick)}attributeChangedCallback(e,t,r){switch(e){case"vertical":this.hasAttribute("vertical")?(this.setAttribute("aria-orientation","vertical"),this._allPanels().forEach(e=>e.setAttribute("vertical","")),this._allTabs().forEach(e=>e.setAttribute("vertical",""))):(this.removeAttribute("aria-orientation"),this._allPanels().forEach(e=>e.removeAttribute("vertical")),this._allTabs().forEach(e=>e.removeAttribute("vertical")));break;case"selected-index":Promise.all([customElements.whenDefined(a.tag),customElements.whenDefined(s.tag)]).then(()=>{this._linkPanels(),this.selectIndex(r)})}}select(e){e&&("pfe-tab"===e.tagName.toLowerCase()?this.selectedIndex=this._getTabIndex(e):console.warn(`${n.tag}: the tab must be a pfe-tab element`))}selectIndex(e){if(void 0===e)return;const t=parseInt(e,10),r=this._allTabs()[t];r?this._selectTab(r):console.warn(`${n.tag}: tab ${e} does not exist`)}_onSlotChange(){this._linked=!1,this._linkPanels()}_linkPanels(){if(this._linked)return;this._allTabs().forEach(e=>{const t=e.nextElementSibling;"pfe-tab-panel"===t.tagName.toLowerCase()?(e.setAttribute("aria-controls",t.id),t.setAttribute("aria-labelledby",e.id)):console.warn(`${n.tag}: tab #${e.id} is not a sibling of a <pfe-tab-panel>`)}),this._linked=!0}_allPanels(){return[...this.querySelectorAll("pfe-tab-panel")]}_allTabs(){return[...this.querySelectorAll("pfe-tab")]}_panelForTab(e){const t=e.getAttribute("aria-controls");return this.querySelector(`#${t}`)}_prevTab(){const e=this._allTabs();let t=e.findIndex(e=>e.selected)-1;return e[(t+e.length)%e.length]}_firstTab(){return this._allTabs()[0]}_lastTab(){const e=this._allTabs();return e[e.length-1]}_nextTab(){const e=this._allTabs();let t=e.findIndex(e=>e.selected)+1;return e[t%e.length]}_getTabIndex(e){return this._allTabs().findIndex(t=>t.id===e.id)}reset(){const e=this._allTabs(),t=this._allPanels();e.forEach(e=>e.selected=!1),t.forEach(e=>e.hidden=!0)}_selectTab(e){this.reset();const t=this._panelForTab(e);let r=!1;if(!t)throw new Error(`No panel with id ${t.id}`);this.selected&&this.selected!==e&&(r=!0,this.dispatchEvent(new CustomEvent(`${n.tag}:hidden-tab`,{bubbles:!0,detail:{tab:this.selected}}))),e.selected=!0,t.hidden=!1,this._setFocus&&(e.focus(),this._setFocus=!1);this._allTabs().findIndex(e=>e.selected);this.selected=e,r&&this.dispatchEvent(new CustomEvent(`${n.tag}:shown-tab`,{bubbles:!0,detail:{tab:this.selected}}))}_onKeyDown(e){if("tab"!==e.target.getAttribute("role"))return;if(e.altKey)return;let r;switch(e.keyCode){case t.LEFT:case t.UP:r=this._prevTab();break;case t.RIGHT:case t.DOWN:r=this._nextTab();break;case t.HOME:r=this._firstTab();break;case t.END:r=this._lastTab();break;default:return}e.preventDefault(),this.selectedIndex=this._getTabIndex(r),this._setFocus=!0}_onClick(e){"tab"===e.target.getAttribute("role")&&(this.selectedIndex=this._getTabIndex(e.target))}}class a extends e{get html(){return'\n<style>\n:host {\n  --pfe-tabs--main:         transparent;\n  --pfe-tabs--aux:          var(--pfe-theme--color--surface--lightest--text, #333);\n  --pfe-tabs--link:         var(--pfe-theme--color--surface--lightest--link, #06c);\n  --pfe-tabs--focus:        var(--pfe-theme--color--surface--lightest--link--focus, #003366);\n  position: relative;\n  display: block;\n  margin: 0 0 -1px;\n  padding-top: var(--pfe-theme--container-padding, 1rem);\n  padding-right: calc(var(--pfe-theme--container-padding, 1rem) * 3.375);\n  padding-bottom: calc(var(--pfe-theme--container-padding, 1rem) * 1.5);\n  padding-left: var(--pfe-theme--container-padding, 1rem);\n  border: var(--pfe-theme--ui--border-width, 1px) var(--pfe-theme--ui--border-style, solid) transparent;\n  border-bottom: 0;\n  background-color: var(--pfe-tabs--main);\n  color: var(--pfe-tabs--aux);\n  text-transform: var(--pfe-tabs__tab--TextTransform, none);\n  font-weight: var(--pfe-theme--font-weight--normal, 500);\n  white-space: nowrap;\n  cursor: pointer; }\n\n:host([aria-selected="true"]) {\n  --pfe-tabs--main:         var(--pfe-theme--color--surface--lightest, #fff);\n  border-color: var(--pfe-theme--color--surface--border, #dfdfdf);\n  border-bottom: 0; }\n\n.indicator {\n  position: absolute;\n  bottom: 12px;\n  left: auto;\n  display: var(--pfe-tabs__indicator--Display, block);\n  height: var(--pfe-tabs__indicator--Height, 4px);\n  width: var(--pfe-tabs__indicator--Width, 22px);\n  background-color: var(--pfe-theme--color--surface--border--darkest, #464646); }\n\n:host(:hover) .indicator {\n  background-color: var(--pfe-tabs--link); }\n\n:host([aria-selected="true"]) .indicator,\n:host([aria-selected="true"]:hover) .indicator {\n  background-color: var(--pfe-tabs--link); }\n\n:host(:focus),\n:host(:focus-visible) {\n  outline: var(--pfe-theme--ui--focus-outline-width, 1px) var(--pfe-theme--ui--focus-outline-style, solid) var(--pfe-tabs--focus); }\n</style>\n<slot></slot>\n<div class="indicator"></div>'}static get tag(){return"pfe-tab"}get styleUrl(){return"pfe-tab.scss"}get templateUrl(){return"pfe-tab.html"}static get observedAttributes(){return["aria-selected"]}constructor(){super(a),this.id||(this.id=`${a.tag}-${r()}`)}connectedCallback(){super.connectedCallback(),this.setAttribute("role","tab"),this.setAttribute("aria-selected","false"),this.setAttribute("tabindex",-1),this.parentNode.hasAttribute("vertical")&&this.setAttribute("vertical","")}attributeChangedCallback(){const e=Boolean(this.selected);this.setAttribute("tabindex",e?0:-1)}set selected(e){e=Boolean(e),this.setAttribute("aria-selected",e)}get selected(){return"true"===this.getAttribute("aria-selected")}}class s extends e{get html(){return"\n<style>\n:host {\n  display: block; }\n\n:host([hidden]) {\n  display: none; }\n</style>\n<slot></slot>"}static get tag(){return"pfe-tab-panel"}get styleUrl(){return"pfe-tab-panel.scss"}get templateUrl(){return"pfe-tab-panel.html"}constructor(){super(s),this.id||(this.id=`${s.tag}-${r()}`)}connectedCallback(){super.connectedCallback(),this.setAttribute("role","tabpanel"),this.setAttribute("tabindex",0)}}e.create(a),e.create(s),e.create(n);export default n;
//# sourceMappingURL=pfe-tabs.js.map
