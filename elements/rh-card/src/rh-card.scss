@import "../../rh-sass/rh-sass";

:host {
  --rh-card--padding:                          calc(#{rh-var(container-spacer)} * 2); // 2x `container-spacer`
  --rh-card--paddingTop:                       var(--rh-card--padding);
  --rh-card--paddingRight:                     var(--rh-card--padding);
  --rh-card--paddingBottom:                    var(--rh-card--padding);
  --rh-card--paddingLeft:                      var(--rh-card--padding);
  // Spacing between elements inside the card
  --rh-card--spacing:                          #{rh-var(container-spacer)};

  // bg is deprecated but still supported
  --rh-card--bg:                               #{rh-color(surface--base)};
  --rh-card--backgroundColor:                  var(--rh-card--bg);
  --rh-card--borderColor:                      var(--rh-card--backgroundColor);

  // Header properties
  --rh-card_header--size:                      #{rh-var(font-size--heading--delta)};
  --rh-card_header--fontWeight:                #{rh-var(font-weight--heading--delta)};
  --rh-card_header--textTransform:             uppercase;

  // Header color settings
  --rh-card__header--backgroundColor:          #{rh-color(surface--base--harmony)};
  --rh-card__header--color--text:              #{rh-color(surface--base--harmony--text)};
  --rh-card__header--color--link:              #{rh-color(surface--base--harmony--link)};
  --rh-card__header--color--link--visited:     #{rh-color(surface--base--harmony--link--visited)};
  --rh-card__header--color--link--hover:       #{rh-color(surface--base--harmony--link--hover)};
  --rh-card__header--color--link--focus:       #{rh-color(surface--base--harmony--link--focus)};

  // Broadcasted color properties
  --rh-broadcasted--color--text:               #{rh-color(surface--base--text)};
  --rh-broadcasted--color--ui-link:            #{rh-color(surface--base--link)};
  --rh-broadcasted--color--ui-link--visited:   #{rh-color(surface--base--link--visited)};
  --rh-broadcasted--color--ui-link--hover:     #{rh-color(surface--base--link--hover)};
  --rh-broadcasted--color--ui-link--focus:     #{rh-color(surface--base--link--focus)};

  display: flex;
  flex-direction: column;
  justify-items: flex-start;

  border: rh-var(surface--border-width)
          rh-var(surface--border-style)
          var(--rh-card--borderColor);
  border-radius: rh-var(surface--border-radius);

  // Base colors
  background: var(--rh-card--backgroundColor);
  color: var(--rh-broadcasted--color--text);
}

a {
  color: var(--rh-broadcasted--color--ui-link);
}

a:visited {
  color: var(--rh-broadcasted--color--ui-link--visited);
}

a:hover {
  color: var(--rh-broadcasted--color--ui-link--hover);
}

a:focus {
  color: var(--rh-broadcasted--color--ui-link--focus);
}

:host([color="dark"]) {
  --rh-card--backgroundColor:                  #{rh-color(surface--darker)};
  --rh-broadcasted--color--text:               #{rh-color(surface--darker--text)};
  --rh-broadcasted--color--ui-link:            #{rh-color(surface--darker--link)};
  --rh-broadcasted--color--ui-link--visited:   #{rh-color(surface--darker--link--visited)};
  --rh-broadcasted--color--ui-link--hover:     #{rh-color(surface--darker--link--hover)};
  --rh-broadcasted--color--ui-link--focus:     #{rh-color(surface--darker--link--focus)};
  // Header colors
  .rh-card__header {
    --rh-card__header--backgroundColor:          #{rh-color(surface--darker--harmony)};
    --rh-card__header--color--text:              #{rh-color(surface--darker--harmony--text)};
    --rh-card__header--color--link:              #{rh-color(surface--darker--harmony--link)};
    --rh-card__header--color--link--visited:     #{rh-color(surface--darker--harmony--link--visited)};
    --rh-card__header--color--link--hover:       #{rh-color(surface--darker--harmony--link--hover)};
    --rh-card__header--color--link--focus:       #{rh-color(surface--darker--harmony--link--focus)};
  }
}

:host([color="darkest"]) {
  --rh-card--backgroundColor:                  #{rh-color(surface--darkest)};
  --rh-broadcasted--color--text:               #{rh-color(surface--darkest--text)};
  --rh-broadcasted--color--ui-link:            #{rh-color(surface--darkest--link)};
  --rh-broadcasted--color--ui-link--visited:   #{rh-color(surface--darkest--link--visited)};
  --rh-broadcasted--color--ui-link--hover:     #{rh-color(surface--darkest--link--hover)};
  --rh-broadcasted--color--ui-link--focus:     #{rh-color(surface--darkest--link--focus)};
  // Header colors
  .rh-card__header {
    --rh-card__header--backgroundColor:          #{rh-color(surface--darkest--harmony)};
    --rh-card__header--color--text:              #{rh-color(surface--darkest--harmony--text)};
    --rh-card__header--color--link:              #{rh-color(surface--darkest--harmony--link)};
    --rh-card__header--color--link--visited:     #{rh-color(surface--darkest--harmony--link--visited)};
    --rh-card__header--color--link--hover:       #{rh-color(surface--darkest--harmony--link--hover)};
    --rh-card__header--color--link--focus:       #{rh-color(surface--darkest--harmony--link--focus)};
  }
}

:host([color="light"]) {
  --rh-card--backgroundColor:                  #{rh-color(surface--lighter)};
  --rh-broadcasted--color--text:               #{rh-color(surface--lighter--text)};
  --rh-broadcasted--color--ui-link:            #{rh-color(surface--lighter--link)};
  --rh-broadcasted--color--ui-link--visited:   #{rh-color(surface--lighter--link--visited)};
  --rh-broadcasted--color--ui-link--hover:     #{rh-color(surface--lighter--link--hover)};
  --rh-broadcasted--color--ui-link--focus:     #{rh-color(surface--lighter--link--focus)};
  // Header colors
  .rh-card__header {
    --rh-card__header--backgroundColor:          #{rh-color(surface--lighter--harmony)};
    --rh-card__header--color--text:              #{rh-color(surface--lighter--harmony--text)};
    --rh-card__header--color--link:              #{rh-color(surface--lighter--harmony--link)};
    --rh-card__header--color--link--visited:     #{rh-color(surface--lighter--harmony--link--visited)};
    --rh-card__header--color--link--hover:       #{rh-color(surface--lighter--harmony--link--hover)};
    --rh-card__header--color--link--focus:       #{rh-color(surface--lighter--harmony--link--focus)};
  }
}

:host([color="lightest"]) {
  --rh-card--backgroundColor:                  #{rh-color(surface--lightest)};
  --rh-broadcasted--color--text:               #{rh-color(surface--lightest--text)};
  --rh-broadcasted--color--ui-link:            #{rh-color(surface--lightest--link)};
  --rh-broadcasted--color--ui-link--visited:   #{rh-color(surface--lightest--link--visited)};
  --rh-broadcasted--color--ui-link--hover:     #{rh-color(surface--lightest--link--hover)};
  --rh-broadcasted--color--ui-link--focus:     #{rh-color(surface--lightest--link--focus)};
  // Header colors
  .rh-card__header {
    --rh-card__header--backgroundColor:          #{rh-color(surface--lightest--harmony)};
    --rh-card__header--color--text:              #{rh-color(surface--lightest--harmony--text)};
    --rh-card__header--color--link:              #{rh-color(surface--lightest--harmony--link)};
    --rh-card__header--color--link--visited:     #{rh-color(surface--lightest--harmony--link--visited)};
    --rh-card__header--color--link--hover:       #{rh-color(surface--lightest--harmony--link--hover)};
    --rh-card__header--color--link--focus:       #{rh-color(surface--lightest--harmony--link--focus)};
  }
}

:host([color="complement"]) {
  --rh-card--backgroundColor:                  #{rh-color(surface--complement)};
  --rh-broadcasted--color--text:               #{rh-color(surface--complement--text)};
  --rh-broadcasted--color--ui-link:            #{rh-color(surface--complement--link)};
  --rh-broadcasted--color--ui-link--visited:   #{rh-color(surface--complement--link--visited)};
  --rh-broadcasted--color--ui-link--hover:     #{rh-color(surface--complement--link--hover)};
  --rh-broadcasted--color--ui-link--focus:     #{rh-color(surface--complement--link--focus)};
  // Header colors
  .rh-card__header {
    --rh-card__header--backgroundColor:          #{rh-color(surface--complement--harmony)};
    --rh-card__header--color--text:              #{rh-color(surface--complement--harmony--text)};
    --rh-card__header--color--link:              #{rh-color(surface--complement--harmony--link)};
    --rh-card__header--color--link--visited:     #{rh-color(surface--complement--harmony--link--visited)};
    --rh-card__header--color--link--hover:       #{rh-color(surface--complement--harmony--link--hover)};
    --rh-card__header--color--link--focus:       #{rh-color(surface--complement--harmony--link--focus)};
  }
}

:host([color="accent"]) {
  --rh-card--backgroundColor:                  #{rh-color(surface--accent)};
  --rh-broadcasted--color--text:               #{rh-color(surface--accent--text)};
  --rh-broadcasted--color--ui-link:            #{rh-color(surface--accent--link)};
  --rh-broadcasted--color--ui-link--visited:   #{rh-color(surface--accent--link--visited)};
  --rh-broadcasted--color--ui-link--hover:     #{rh-color(surface--accent--link--hover)};
  --rh-broadcasted--color--ui-link--focus:     #{rh-color(surface--accent--link--focus)};
  // Header colors
  .rh-card__header {
    --rh-card__header--backgroundColor:          #{rh-color(surface--accent--harmony)};
    --rh-card__header--color--text:              #{rh-color(surface--accent--harmony--text)};
    --rh-card__header--color--link:              #{rh-color(surface--accent--harmony--link)};
    --rh-card__header--color--link--visited:     #{rh-color(surface--accent--harmony--link--visited)};
    --rh-card__header--color--link--hover:       #{rh-color(surface--accent--harmony--link--hover)};
    --rh-card__header--color--link--focus:       #{rh-color(surface--accent--harmony--link--focus)};
  }
}

:host([size="small"]) {
  --rh-card--padding:        #{rh-var(container-spacer)};
}

.rh-card__header,
.rh-card__body,
.rh-card__footer {
  display: block;
  margin: 0;
}

.rh-card__header {
  background-color: var(--rh-card_header--backgroundColor);
  padding: var(--rh-card--spacing) var(--rh-card--paddingRight) var(--rh-card--spacing) var(--rh-card--paddingLeft);
  @for $n from 1 to 6 {
    &::slotted(h#{$n}:first-child) {
      font-size: var(--rh-card_header--size);
      text-transform: var(--rh-card_header--textTransform);
      color: var(--rh-card__header--color--text);
      margin-top: 0;
      margin-bottom: 0;
    }
    &::slotted(*:last-of-type) {
      margin-bottom: 0;
    }
  }
}

.rh-card__body {
  padding: var(--rh-card--spacing) var(--rh-card--paddingRight) var(--rh-card--spacing) var(--rh-card--paddingLeft);
  &::slotted(*:nth-child(2)) { // child pseudo-selectors appear to be based on slotted code before upgrade.
    margin-top: 0 !important;
  }
  // Use this when the header color is unique
  // &:not(:first-child) {
  //   padding-top: 0;
  // }
}

.rh-card__footer {
  // margin-top: rh-var(container-spacer);
  margin-top: auto; // This allows the footer to move to the very bottom
  justify-self: flex-end;
  padding: var(--rh-card--spacing) var(--rh-card--paddingRight) var(--rh-card--paddingBottom) var(--rh-card--paddingLeft);
}
