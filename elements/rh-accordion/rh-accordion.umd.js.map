{"version":3,"file":"rh-accordion.umd.js","sources":["rh-accordion.umd.js"],"sourcesContent":["/*\n * Copyright 2018 Red Hat, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport RHElement from \"../rhelement/rhelement.umd\";\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\nif (!Array.prototype.findIndex) {\n  Object.defineProperty(Array.prototype, \"findIndex\", {\n    value: function(predicate) {\n      // 1. Let O be ? ToObject(this value).\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n\n      var o = Object(this);\n\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n      var len = o.length >>> 0;\n\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n      if (typeof predicate !== \"function\") {\n        throw new TypeError(\"predicate must be a function\");\n      }\n\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n      var thisArg = arguments[1];\n\n      // 5. Let k be 0.\n      var k = 0;\n\n      // 6. Repeat, while k < len\n      while (k < len) {\n        // a. Let Pk be ! ToString(k).\n        // b. Let kValue be ? Get(O, Pk).\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n        // d. If testResult is true, return k.\n        var kValue = o[k];\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return k;\n        }\n        // e. Increase k by 1.\n        k++;\n      }\n\n      // 7. Return -1.\n      return -1;\n    }\n  });\n}\n\nfunction generateId() {\n  return Math.random()\n    .toString(36)\n    .substr(2, 9);\n}\n\nclass RhAccordion extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  display: block;\n  position: relative;\n  overflow: hidden;\n  margin: 0; }\n</style>\n<slot></slot>`;\n  }\n\n  static get tag() {\n    return \"rh-accordion\";\n  }\n\n  get styleUrl() {\n    return \"rh-accordion.scss\";\n  }\n\n  get templateUrl() {\n    return \"rh-accordion.html\";\n  }\n\n  static get observedAttributes() {\n    return [\"theme\", \"color\"];\n  }\n\n  static get cascadingAttributes() {\n    return {\n      color: \"rh-accordion-header\"\n    };\n  }\n\n  constructor() {\n    super(RhAccordion);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.setAttribute(\"role\", \"presentation\");\n    this.setAttribute(\"defined\", \"\");\n\n    this.addEventListener(`${RhAccordion.tag}:change`, this._changeHandler);\n    this.addEventListener(\"keydown\", this._keydownHandler);\n\n    Promise.all([\n      customElements.whenDefined(RhAccordionHeader.tag),\n      customElements.whenDefined(RhAccordionPanel.tag)\n    ]).then(this._linkPanels());\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(`${RhAccordion.tag}:change`, this._changeHandler);\n    this.removeEventListener(\"keydown\", this._keydownHandler);\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    super.attributeChangedCallback(attr, oldVal, newVal);\n\n    if (attr === \"color\") {\n      const headers = this.querySelectorAll(RhAccordionHeader.tag);\n\n      if (newVal === \"striped\") {\n        [...headers].forEach((header, index) => {\n          const headerClass = index % 2 ? \"even\" : \"odd\";\n          header.classList.add(headerClass);\n        });\n      } else {\n        [...headers].forEach((header, index) => {\n          header.classList.remove(\"even\", \"odd\");\n        });\n      }\n    }\n  }\n\n  toggle(index) {\n    const headers = this._allHeaders();\n    const panels = this._allPanels();\n    const header = headers[index];\n    const panel = panels[index];\n\n    if (!header || !panel) {\n      return;\n    }\n\n    if (!header.expanded) {\n      this._expandHeader(header);\n      this._expandPanel(panel);\n    } else {\n      this._collapseHeader(header);\n      this._collapsePanel(panel);\n    }\n  }\n\n  expand(index) {\n    const headers = this._allHeaders();\n    const panels = this._allPanels();\n    const header = headers[index];\n    const panel = panels[index];\n\n    if (!header || !panel) {\n      return;\n    }\n\n    this._expandHeader(header);\n    this._expandPanel(panel);\n  }\n\n  expandAll() {\n    const headers = this._allHeaders();\n    const panels = this._allPanels();\n\n    headers.forEach(header => this._expandHeader(header));\n    panels.forEach(panel => this._expandPanel(panel));\n  }\n\n  collapse(index) {\n    const headers = this._allHeaders();\n    const panels = this._allPanels();\n    const header = headers[index];\n    const panel = panels[index];\n\n    if (!header || !panel) {\n      return;\n    }\n\n    this._collapseHeader(header);\n    this._collapsePanel(panel);\n  }\n\n  collapseAll() {\n    const headers = this._allHeaders();\n    const panels = this._allPanels();\n\n    headers.forEach(header => this._collapseHeader(header));\n    panels.forEach(panel => this._collapsePanel(panel));\n  }\n\n  _linkPanels() {\n    const headers = this._allHeaders();\n    headers.forEach(header => {\n      const panel = this._panelForHeader(header);\n\n      header.setAttribute(\"aria-controls\", panel.id);\n      panel.setAttribute(\"aria-labelledby\", header.id);\n    });\n  }\n\n  _changeHandler(evt) {\n    if (this.classList.contains(\"animating\")) {\n      return;\n    }\n\n    const header = evt.target;\n    const panel = evt.target.nextElementSibling;\n\n    if (evt.detail.expanded) {\n      this._expandHeader(header);\n      this._expandPanel(panel);\n    } else {\n      this._collapseHeader(header);\n      this._collapsePanel(panel);\n    }\n  }\n\n  _toggle(header, panel) {}\n\n  _expandHeader(header) {\n    header.expanded = true;\n  }\n\n  _expandPanel(panel) {\n    if (panel.expanded) {\n      return;\n    }\n\n    panel.expanded = true;\n\n    const height = panel.getBoundingClientRect().height;\n    this._animate(panel, 0, height);\n  }\n\n  _collapseHeader(header) {\n    header.expanded = false;\n  }\n\n  _collapsePanel(panel) {\n    if (!panel.expanded) {\n      return;\n    }\n\n    const height = panel.getBoundingClientRect().height;\n    panel.expanded = false;\n\n    this._animate(panel, height, 0);\n  }\n\n  _animate(panel, start, end) {\n    panel.classList.add(\"animating\");\n    panel.style.height = `${start}px`;\n\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        panel.style.height = `${end}px`;\n        panel.classList.add(\"animating\");\n        panel.addEventListener(\"transitionend\", this._transitionEndHandler);\n      });\n    });\n  }\n\n  _keydownHandler(evt) {\n    const currentHeader = evt.target;\n\n    if (!this._isHeader(currentHeader)) {\n      return;\n    }\n\n    let newHeader;\n\n    switch (evt.key) {\n      case \"ArrowDown\":\n      case \"Down\":\n      case \"ArrowRight\":\n      case \"Right\":\n        newHeader = this._nextHeader();\n        break;\n      case \"ArrowUp\":\n      case \"Up\":\n      case \"ArrowLeft\":\n      case \"Left\":\n        newHeader = this._previousHeader();\n        break;\n      case \"Home\":\n        newHeader = this._firstHeader();\n        break;\n      case \"End\":\n        newHeader = this._lastHeader();\n        break;\n      default:\n        return;\n    }\n\n    newHeader.shadowRoot.querySelector(\"button\").focus();\n  }\n\n  _transitionEndHandler(evt) {\n    evt.target.style.height = \"\";\n    evt.target.classList.remove(\"animating\");\n    evt.target.removeEventListener(\"transitionend\", this._transitionEndHandler);\n  }\n\n  _allHeaders() {\n    return [...this.querySelectorAll(RhAccordionHeader.tag)];\n  }\n\n  _allPanels() {\n    return [...this.querySelectorAll(RhAccordionPanel.tag)];\n  }\n\n  _panelForHeader(header) {\n    const next = header.nextElementSibling;\n\n    if (next.tagName.toLowerCase() !== RhAccordionPanel.tag) {\n      console.error(\n        `${RhAccordion.tag}: Sibling element to a header needs to be a panel`\n      );\n      return;\n    }\n\n    return next;\n  }\n\n  _previousHeader() {\n    const headers = this._allHeaders();\n    let newIndex =\n      headers.findIndex(header => header === document.activeElement) - 1;\n    return headers[(newIndex + headers.length) % headers.length];\n  }\n\n  _nextHeader() {\n    const headers = this._allHeaders();\n    let newIndex =\n      headers.findIndex(header => header === document.activeElement) + 1;\n    return headers[newIndex % headers.length];\n  }\n\n  _firstHeader() {\n    const headers = this._allHeaders();\n    return headers[0];\n  }\n\n  _lastHeader() {\n    const headers = this._allHeaders();\n    return headers[headers.length - 1];\n  }\n\n  _isHeader(element) {\n    return element.tagName.toLowerCase() === RhAccordionHeader.tag;\n  }\n}\n\nclass RhAccordionHeader extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  --rh-accordion--main:         var(--rh-theme--color--surface--lighter, #ececec);\n  --rh-accordion--aux:          var(--rh-theme--color--surface--lighter--text, #333);\n  --rh-accordion--focus:        var(--rh-theme--color--surface--lighter--link--focus, #003366);\n  display: block;\n  background: var(--rh-accordion--main);\n  color: var(--rh-accordion--aux); }\n  :host button {\n    padding: calc(var(--rh-theme--container-spacer, 1rem) * 0.75);\n    margin: 0;\n    width: 100%;\n    height: auto;\n    border: 1px solid transparent;\n    font-family: inherit;\n    font-size: var(--rh-theme--font-size, 16px);\n    line-height: 1.5;\n    text-align: left;\n    background: none;\n    cursor: pointer;\n    color: var(--rh-accordion--aux); }\n    :host button:focus {\n      outline: 1px solid var(--rh-accordion--focus); }\n    :host button::-moz-focus-inner {\n      border: 0; }\n    :host button[aria-expanded] {\n      position: relative;\n      display: block;\n      font-weight: normal;\n      padding-left: calc(var(--rh-theme--container-spacer, 1rem) * 2.5); }\n    :host button[aria-expanded=\"false\"]::before {\n      content: \"\";\n      position: absolute;\n      left: var(--rh-theme--container-spacer, 1rem);\n      top: calc((var(--rh-theme--container-spacer, 1rem) * 0.75) + 0.5935em);\n      display: block;\n      border-style: solid;\n      border-width: 0.15em 0.15em 0 0;\n      height: 0.313em;\n      width: 0.313em;\n      text-align: center;\n      transition: transform 0.15s;\n      transform: rotate(45deg); }\n    :host button[aria-expanded=\"true\"]::before {\n      content: \"\";\n      position: absolute;\n      left: var(--rh-theme--container-spacer, 1rem);\n      top: calc((var(--rh-theme--container-spacer, 1rem) * 0.75) + 0.5935em);\n      display: block;\n      width: 0.313em;\n      height: 0.313em;\n      border-style: solid;\n      border-width: 0.15em 0.15em 0 0;\n      text-align: center;\n      transition: all 0.15s;\n      transform: rotate(135deg); }\n\n:host(.animating) {\n  transition: transform 0.3s var(--rh-theme--animation-timing, cubic-bezier(0.465, 0.183, 0.153, 0.946)); }\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  margin: 1px; }\n\n:host([color=\"lightest\"]),\n:host([color=\"striped\"].even) {\n  --rh-accordion--main:         var(--rh-theme--color--surface--lightest, #fff);\n  --rh-accordion--aux:          var(--rh-theme--color--surface--lightest--text, #333);\n  --rh-accordion--focus:        var(--rh-theme--color--surface--lightest--link--focus, #003366); }\n  :host([color=\"lightest\"]) button[aria-expanded=\"true\"],\n  :host([color=\"striped\"].even) button[aria-expanded=\"true\"] {\n    border-top-color: var(--rh-theme--color--surface--border--lightest, #ececec);\n    border-left-color: var(--rh-theme--color--surface--border--lightest, #ececec);\n    border-right-color: var(--rh-theme--color--surface--border--lightest, #ececec); }\n\n:host([color=\"base\"]) {\n  --rh-accordion--main:         var(--rh-theme--color--surface--base, #dfdfdf);\n  --rh-accordion--aux:          var(--rh-theme--color--surface--base--text, #333);\n  --rh-accordion--focus:        var(--rh-theme--color--surface--base--link--focus, #00305b); }\n\n:host([color=\"dark\"]) {\n  --rh-accordion--main:         var(--rh-theme--color--surface--darker, #464646);\n  --rh-accordion--aux:          var(--rh-theme--color--surface--darker--text, #fff);\n  --rh-accordion--focus:        var(--rh-theme--color--surface--darker--link--focus, #cce6ff); }\n\n:host([color=\"darkest\"]) {\n  --rh-accordion--main:         var(--rh-theme--color--surface--darkest, #131313);\n  --rh-accordion--aux:          var(--rh-theme--color--surface--darkest--text, #fff);\n  --rh-accordion--focus:        var(--rh-theme--color--surface--darkest--link--focus, #cce6ff); }\n\n:host([color=\"accent\"]) {\n  --rh-accordion--main:         var(--rh-theme--color--surface--accent, #fe460d);\n  --rh-accordion--aux:          var(--rh-theme--color--surface--accent--text, #fff);\n  --rh-accordion--focus:        var(--rh-theme--color--surface--accent--link--focus, #cce6ff); }\n\n:host([color=\"complement\"]) {\n  --rh-accordion--main:         var(--rh-theme--color--surface--complement, #0477a4);\n  --rh-accordion--aux:          var(--rh-theme--color--surface--complement--text, #fff);\n  --rh-accordion--focus:        var(--rh-theme--color--surface--complement--link--focus, #cce6ff); }\n</style>\n<button aria-expanded=\"false\" role=\"tab\"></button>`;\n  }\n\n  static get tag() {\n    return \"rh-accordion-header\";\n  }\n\n  get styleUrl() {\n    return \"rh-accordion-header.scss\";\n  }\n\n  get templateUrl() {\n    return \"rh-accordion-header.html\";\n  }\n\n  static get observedAttributes() {\n    return [\"aria-expanded\"];\n  }\n\n  constructor() {\n    super(RhAccordionHeader);\n    this._clickHandler = this._clickHandler.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.hasAttribute(\"role\")) {\n      this.setAttribute(\"role\", \"header\");\n    }\n\n    if (!this.id) {\n      this.id = `${RhAccordionHeader.tag}-${generateId()}`;\n    }\n\n    this.button = this.shadowRoot.querySelector(\"button\");\n\n    const child = this.children[0];\n    let isHeaderTag = false;\n\n    if (child) {\n      switch (child.tagName) {\n        case \"H1\":\n        case \"H2\":\n        case \"H3\":\n        case \"H4\":\n        case \"H5\":\n        case \"H6\":\n          isHeaderTag = true;\n          break;\n      }\n\n      const wrapperTag = document.createElement(child.tagName);\n      this.button.innerText = child.innerText;\n\n      wrapperTag.appendChild(this.button);\n      this.shadowRoot.appendChild(wrapperTag);\n    } else {\n      this.button.innerText = this.textContent.trim();\n    }\n\n    if (!isHeaderTag) {\n      console.warn(\n        `${\n          RhAccordionHeader.tag\n        }: The first child in the light DOM must be a Header level tag (h1, h2, h3, h4, h5, or h6)`\n      );\n    }\n\n    this.addEventListener(\"click\", this._clickHandler);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"click\", this._clickHandler);\n  }\n\n  get expanded() {\n    return this.hasAttribute(\"aria-expanded\");\n  }\n\n  set expanded(val) {\n    val = Boolean(val);\n\n    if (val) {\n      this.setAttribute(\"aria-expanded\", true);\n      this.button.setAttribute(\"aria-expanded\", true);\n    } else {\n      this.removeAttribute(\"aria-expanded\");\n      this.button.setAttribute(\"aria-expanded\", false);\n    }\n  }\n\n  _clickHandler(event) {\n    this.dispatchEvent(\n      new CustomEvent(`${RhAccordion.tag}:change`, {\n        detail: { expanded: !this.expanded },\n        bubbles: true\n      })\n    );\n  }\n}\n\nclass RhAccordionPanel extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  display: none;\n  overflow: hidden;\n  background: var(--rh-theme--color--surface--lightest, #fff);\n  will-change: height; }\n\n:host([expanded]) {\n  display: block;\n  position: relative; }\n\n:host(.animating) {\n  display: block;\n  transition: height 0.3s ease-in-out; }\n\n.container {\n  margin: 0 1px;\n  border: 1px solid var(--rh-theme--color--surface--border--lightest, #ececec);\n  border-top: none;\n  padding: var(--rh-theme--container-spacer, 1rem); }\n</style>\n<div tabindex=\"-1\" role=\"tabpanel\">\n  <div class=\"container\">\n    <slot></slot>\n  </div>\n</div>`;\n  }\n\n  static get tag() {\n    return \"rh-accordion-panel\";\n  }\n\n  get styleUrl() {\n    return \"rh-accordion-panel.scss\";\n  }\n\n  get templateUrl() {\n    return \"rh-accordion-panel.html\";\n  }\n\n  constructor() {\n    super(RhAccordionPanel);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.hasAttribute(\"role\")) {\n      this.setAttribute(\"role\", \"region\");\n    }\n\n    if (!this.id) {\n      this.id = `${RhAccordionPanel.tag}-${generateId()}`;\n    }\n  }\n\n  get expanded() {\n    return this.hasAttribute(\"expanded\");\n  }\n\n  set expanded(val) {\n    const value = Boolean(val);\n\n    if (value) {\n      this.setAttribute(\"expanded\", \"\");\n    } else {\n      this.removeAttribute(\"expanded\");\n    }\n  }\n}\n\nRHElement.create(RhAccordionHeader);\nRHElement.create(RhAccordionPanel);\nRHElement.create(RhAccordion);\n"],"names":["Array","prototype","findIndex","Object","defineProperty","value","predicate","TypeError","o","len","length","thisArg","arguments","k","kValue","call","generateId","Math","random","toString","substr","RhAccordion","color","setAttribute","addEventListener","tag","_changeHandler","_keydownHandler","Promise","all","customElements","whenDefined","RhAccordionHeader","RhAccordionPanel","then","_linkPanels","removeEventListener","attr","oldVal","newVal","headers","querySelectorAll","forEach","header","index","headerClass","classList","add","remove","_allHeaders","panels","_allPanels","panel","expanded","_expandHeader","_expandPanel","_collapseHeader","_collapsePanel","_panelForHeader","id","evt","contains","target","nextElementSibling","detail","height","getBoundingClientRect","_animate","start","end","style","requestAnimationFrame","_transitionEndHandler","currentHeader","_isHeader","newHeader","key","_nextHeader","_previousHeader","_firstHeader","_lastHeader","shadowRoot","querySelector","focus","next","tagName","toLowerCase","console","error","newIndex","document","activeElement","element","RHElement","_clickHandler","bind","hasAttribute","button","child","children","isHeaderTag","wrapperTag","createElement","innerText","appendChild","textContent","trim","warn","event","dispatchEvent","CustomEvent","bubbles","val","Boolean","removeAttribute","create"],"mappings":"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"}